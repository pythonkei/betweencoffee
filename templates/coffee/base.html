{% load static %}
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <title>Between Cafe</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">

    <link rel="stylesheet" href={% static "css/open-iconic-bootstrap.min.css" %} />
    <link rel="stylesheet" href={% static "css/animate.css" %} />
    <link rel="stylesheet" href={% static "css/owl.carousel.min.css" %} />
    <link rel="stylesheet" href={% static "css/owl.theme.default.min.css" %} />
    <link rel="stylesheet" href={% static "css/magnific-popup.css" %} />
    <link rel="stylesheet" href={% static "css/aos.css" %} />
    <link rel="stylesheet" href={% static "css/ionicons.min.css" %} />
    <link rel="stylesheet" href={% static "css/bootstrap-datepicker.css" %} />
    <link rel="stylesheet" href={% static "css/jquery.timepicker.min.css" %} />
    <link rel="stylesheet" href={% static "css/flaticon.css" %} />
    <link rel="stylesheet" href={% static "css/icomoon.css" %} />
    <link rel="stylesheet" href={% static 'css/style.css' %} />
    <link rel='stylesheet' href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair:ital,opsz,wght@0,5..1200,300..900;1,5..1200,300..900&display=swap" rel="stylesheet">

    <title>Between Coffee{% block title %}{% endblock title %}</title>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
        <a class="navbar-brand" href="{% url 'home' %}">Between <small>Coffee</small></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'product_list' %}">Menu</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'about' %}">Bean</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'contact' %}">Blog</a>
                </li>
                {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profile' %}">
                            <i class="icon-user"></i>
                        </a>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}">
                            <i class="icon-user"></i>
                        </a>
                    </li>
                {% endif %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'cart:cart_detail' %}">
                        <i class="icon-shopping-cart"></i>
                        <span class="cart-amount-label cart-amount-label-pill cart-count">
                            {% with total_items=cart|length %}
                                {% if total_items > 0 %}
                                    {{ total_items }}
                                {% else %}
                                    0
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<main>
{% block content %}
{% endblock %}
</main>

<footer class="ftco-footer ftco-section img" style="background-image: url('{% static 'images/footer_bg.jpg' %}');">
    <div class="overlay"></div>
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-4 col-md-6 mb-5 mb-md-5">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Between Cafe</h2>
                    <p>Brewed in a Flash, Perfect to Go!</p>
                    <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                        <li class="ftco-animate"><a href="#"><span class="icon-whatsapp"></span></a></li>
                        <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                        <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-5 mb-md-5">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">啡咖師的日常</h2>
                    <div class="block-21 mb-4 d-flex">
                        <a class="blog-img mr-4" style="background-image: url('{% static 'images/blog_02.jpg' %}');"></a>
                        <div class="text">
                            <h3 class="heading"><a href="#">根據唱片是否適合搭配他的咖啡來挑選唱片</a></h3>
                            <div class="meta">
                                <div><a href="#"><span class="icon-calendar"></span> Jan 03, 2025</a></div>
                                <div><a href="#"><span class="icon-person"></span> Ryan Roasters</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="block-21 mb-4 d-flex">
                        <a class="blog-img mr-4" style="background-image: url('{% static 'images/blog_01.jpg' %}');"></a>
                        <div class="text">
                            <h3 class="heading"><a href="#">發酵槽中進行 16 小時的乾燥發酵, 然後用大量的水清洗四次</a></h3>
                            <div class="meta">
                                <div><a href="#"><span class="icon-calendar"></span> Jan 12, 2025</a></div>
                                <div><a href="#"><span class="icon-person"></span> Ryan Roasters</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | Made with Kei group <i hidden class="icon-heart" aria-hidden="true"></i></p>
            </div>
        </div>
    </div>
</footer>

{% block scripts %}
    <script src={% static "js/jquery.min.js" %}></script>
    <script src={% static "js/jquery.timepicker.min.js" %}></script>
    <script src={% static "js/jquery-migrate-3.0.1.min.js" %}></script>
    <script src={% static "js/popper.min.js" %}></script>
    <script src={% static "js/bootstrap.min.js" %}></script>
    <script src={% static "js/jquery.easing.1.3.js" %}></script>
    <script src={% static "js/jquery.waypoints.min.js" %}></script>
    <script src={% static "js/jquery.stellar.min.js" %}></script>
    <script src={% static "js/owl.carousel.min.js" %}></script>
    <script src={% static "js/jquery.magnific-popup.min.js" %}></script>
    <script src={% static "js/aos.js" %}></script>
    <script src={% static "js/jquery.animateNumber.min.js" %}></script>
    <script src={% static "js/bootstrap-datepicker.js" %}></script>
    <script src={% static "js/scrollax.min.js" %}></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
    <script src={% static "js/google-map.js" %}></script>
    <script src={% static "js/main.js" %}></script>

    <script>
    function updateCartCount() {
        $.ajax({
            url: '{% url "cart:cart_count" %}',
            method: 'GET',
            success: function(data) {
                $('.cart-count').text(data.count);
            }
        });
    }
    
    $(document).ready(function() {
        updateCartCount();
        setInterval(updateCartCount, 10000);
        
        function getHongKongTime() {
            const now = new Date();
            // Hong Kong is UTC+8
            const hkOffset = 8 * 60 * 60 * 1000; // 8 hours in milliseconds
            const hkTime = new Date(now.getTime() + hkOffset);
            
            // Format to h:mm AM/PM
            let hours = hkTime.getHours();
            const minutes = hkTime.getMinutes();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            const formattedTime = hours + ':' + (minutes < 10 ? '0' + minutes : minutes) + ' ' + ampm;
            return formattedTime;
        }

            const currentTime = getHongKongTime();
            $('#time').timepicker({
                timeFormat: 'h:mm p',
                interval: 5,
                minTime: '8',
                maxTime: '6:00pm',
                defaultTime: currentTime,
                startTime: currentTime,
                dynamic: false,
                dropdown: true,
                scrollbar: true
            });

        $('#time').on('focus', function() {
            $(this).timepicker('setTime', getHongKongTime());
        });
    });
    </script>
{% endblock %}
</body>
</html>
